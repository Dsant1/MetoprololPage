<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Grayscale - Start Bootstrap Theme</title>
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
            <div class="container px-4 px-lg-5">
                <a class="navbar-brand" href="#page-top">PROYECTO DE EJECUCIÓN </a>
                <button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    Menu
                    <i class="fas fa-bars"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item"><a class="nav-link" href="#about">INICIO</a></li>
                        <li class="nav-item"><a class="nav-link" href="#projects">NOSOTROS</a></li>
                        <li class="nav-item"><a class="nav-link" href="#signup">NUESTRO PROFESOR</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Masthead-->
        <header class="masthead">
            <div class="container px-4 px-lg-5 d-flex h-100 align-items-center justify-content-center">
                <div class="d-flex justify-content-center">
                    <div class="text-center">
                        <h1 class="mx-auto my-0 text-uppercase">METOPROLOL</h1>
                        <h2 class="text-white-50 mx-auto mt-2 mb-5">Descripcion del medicamento </h2>
                        <a class="btn btn-danger" href="#exper">Conoce másy</a>
                    </div>
                </div>
            </div>
        </header>
        <!-- About-->
        <section class="about-section text-center" id="about">
            <div class="container px-4 px-lg-5">
                <div class="row gx-4 gx-lg-5 justify-content-center">
                    <div class="col-lg-8">
                        <h2 id="exper" class="text-white mb-4">Visualización molecular del metoprolol</h2>
                    </div>
                </div>
                <div class="row justify-content-center my-5">
                    <div class="col-12 col-md-6 mb-4">
                        <div class="card bg-dark text-white shadow">
                            <div class="card-header">Estructura 2D</div>
                            <div id="viewer2d" style="width:100%;height:350px;"></div>
                        </div>
                    </div>
                    <div class="col-12 col-md-6 mb-4">
                        <div class="card bg-dark text-white shadow">
                            <div class="card-header">Estructura 3D</div>
                            <div id="viewer3d" style="width:100%;height:350px;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Projects-->
        <section class="projects-section bg-light" id="projects">
            <div class="container px-4 px-lg-5">
                <!-- Featured Project Row-->
                <!-- Galería de presentaciones comunes del metoprolol -->
                <div class="row mb-3">
                    <div class="col-12">
                        <div class="featured-text text-center text-lg-left">
                            <h3>Grupos funcionales presentes en el metoprolol</h3>
                        </div>
                    </div>
                </div>
                <div class="row gx-4 gy-4 mb-4 justify-content-center" id="grupos-funcionales-meto">
                    <div class="col-12 col-sm-6 col-md-3 d-flex align-items-stretch">
                        <div class="card h-100 shadow-sm border-0 galeria-hover galeria-hover-comercial">
                            <div class="card-header text-center bg-personalized text-white">
                                <h5 class="mb-0">Éter aromático</h5>
                            </div>
                            <div id="viewer-funcional-1" style="width:100%;height:220px;"></div>
                            <div class="card-body">
                                <p class="small">Enlace oxígeno entre el anillo bencénico y la cadena lateral (Ar–O–R).</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-md-3 d-flex align-items-stretch">
                        <div class="card h-100 shadow-sm border-0 galeria-hover galeria-hover-comercial">
                            <div class="card-header text-center bg-personalized text-white">
                                <h5 class="mb-0">Alcohol secundario</h5>
                            </div>
                            <div id="viewer-funcional-2" style="width:100%;height:220px;"></div>
                            <div class="card-body">
                                <p class="small">Grupo –CHOH– en la cadena lateral (hidroxilo unido a carbono secundario).</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-md-3 d-flex align-items-stretch">
                        <div class="card h-100 shadow-sm border-0 galeria-hover galeria-hover-comercial">
                            <div class="card-header text-center bg-personalized text-white">
                                <h5 class="mb-0">Amina secundaria</h5>
                            </div>
                            <div id="viewer-funcional-3" style="width:100%;height:220px;"></div>
                            <div class="card-body">
                                <p class="small">Grupo –NH– en la cadena lateral (nitrógeno unido a dos carbonos).</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-md-3 d-flex align-items-stretch">
                        <div class="card h-100 shadow-sm border-0 galeria-hover galeria-hover-comercial">
                            <div class="card-header text-center bg-personalized text-white">
                                <h5 class="mb-0">Anillo aromático (bencénico)</h5>
                            </div>
                            <div id="viewer-funcional-4" style="width:100%;height:220px;"></div>
                            <div class="card-body">
                                <p class="small">Estructura cíclica de seis carbonos con dobles enlaces conjugados (benceno).</p>
                            </div>
                        </div>
                    </div>
                </div>
   
    </section>
    <!-- Signup-->
    <section class="about-section text-center" >
            <div class="container px-4 px-lg-5">
                <div class="row gx-4 gx-lg-5 justify-content-center mb-4">
                    <div class="col-lg-10">
                        <h2 class="text-white mb-4">Hibridación de los carbonos en el metoprolol</h2>
                        <p class="text-white-50">Interactúa con la tabla: al pasar el mouse sobre cada fila, el átomo correspondiente se resalta en la molécula 3D. Haz clic para ver detalles.</p>
                    </div>
                </div>
                <div class="row gx-4 gx-lg-5 justify-content-center mb-4">
                    <div class="col-12 col-lg-7 mb-4">
                        <div class="table-responsive">
                            <table class="table table-hover table-bordered align-middle bg-white" id="tabla-hibridacion">
                                <thead class="table-light">
                                    <tr>
                                        <th>Átomo</th>
                                        <th>Fragmento / posición</th>
                                        <th>Hibridación</th>
                                        <th>Clase (tipo de átomo)</th>
                                        <th>Ángulos aproximados</th>
                                        <th>Tipo de enlace principal</th>
                                        <th>Geometría molecular</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr data-serial="1,2,3,4,5,6">
                                        <td>C1–C6</td>
                                        <td>Anillo aromático (benceno)</td>
                                        <td><b>sp²</b></td>
                                        <td>Carbono aromático</td>
                                        <td>~120º</td>
                                        <td>σ (C–C, C–H) + π (deslocalizado)</td>
                                        <td><b>Trigonal plana</b></td>
                                    </tr>
                                    <tr data-serial="7,8,10,12,13,14,15">
                                        <td>C7, C8, C10, C12, C13, C14, C15</td>
                                        <td>C alifáticos (CH₂, CH, CH₃)</td>
                                        <td><b>sp³</b></td>
                                        <td>Carbono saturado (alifático)</td>
                                        <td>~109.5º</td>
                                        <td>σ (C–C, C–H, C–N, C–O)</td>
                                        <td><b>Tetraédrica</b></td>
                                    </tr>
                                    <tr data-serial="9">
                                        <td>C9</td>
                                        <td>C del grupo metoxi (CH₃–O–)</td>
                                        <td><b>sp³</b></td>
                                        <td>Carbono saturado (metilo)</td>
                                        <td>~109.5º</td>
                                        <td>σ (C–H, C–O)</td>
                                        <td><b>Tetraédrica</b></td>
                                    </tr>
                                    <tr data-serial="11">
                                        <td>C11</td>
                                        <td>C del alcohol secundario (–CHOH–)</td>
                                        <td><b>sp³</b></td>
                                        <td>Carbono saturado con –OH</td>
                                        <td>~109.5º</td>
                                        <td>σ (C–C, C–H, C–O)</td>
                                        <td><b>Tetraédrica</b></td>
                                    </tr>
                                    <tr data-serial="N1">
                                        <td>N1</td>
                                        <td>Amina secundaria (–NH–)</td>
                                        <td><b>sp³</b></td>
                                        <td>Nitrógeno alifático con par libre</td>
                                        <td>~107º (menor que 109.5º por repulsión de par libre)</td>
                                        <td>σ (C–N, N–H)</td>
                                        <td><b>Pirámide trigonal</b></td>
                                    </tr>
                                    <tr data-serial="O1">
                                        <td>O1</td>
                                        <td>Oxígeno fenílico (Ar–O–)</td>
                                        <td><b>sp³*</b></td>
                                        <td>Oxígeno éter</td>
                                        <td>~104–109º</td>
                                        <td>σ (C–O)</td>
                                        <td><b>Angular</b></td>
                                    </tr>
                                    <tr data-serial="O2">
                                        <td>O2</td>
                                        <td>Oxígeno del metoxi (–O–CH₃)</td>
                                        <td><b>sp³</b></td>
                                        <td>Oxígeno éter</td>
                                        <td>~104–109º</td>
                                        <td>σ (C–O)</td>
                                        <td><b>Angular</b></td>
                                    </tr>
                                    <tr data-serial="O3">
                                        <td>O3</td>
                                        <td>Oxígeno del alcohol (–OH)</td>
                                        <td><b>sp³</b></td>
                                        <td>Oxígeno alcohol</td>
                                        <td>~104.5º</td>
                                        <td>σ (O–H, C–O)</td>
                                        <td><b>Angular</b></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <!-- Overlay modal para visualización 3D -->
                <div id="overlay-hibridacion" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(30,30,30,0.92);z-index:2000;align-items:center;justify-content:center;">
                    <div style="background:#fff;border-radius:1.2rem;box-shadow:0 8px 32px #0008;padding:2rem 2rem 1.5rem 2rem;max-width:480px;width:95vw;max-height:90vh;overflow:auto;position:relative;">
                        <button id="close-overlay-hibridacion" style="position:absolute;top:1rem;right:1rem;font-size:1.5rem;background:none;border:none;color:#333;cursor:pointer;">&times;</button>
                        <div id="overlay-hibridacion-info" style="margin-bottom:1rem;"></div>
                        <div id="overlay-hibridacion-viewer" style="width:100%;height:320px;"></div>
                    </div>
                </div>
                </div>
            </div>
        </section>
        <!-- Contact-->
          <section class="contact-section bg-personalized">
            <div class="container px-4 px-lg-5">
                <div class="d-flex justify-content-center py-4">
                    <h3>COSAS QUE TE PODRIAN INTERESAR</h3>
                </div>
                <div class="row gx-4 gx-lg-5">
                    <div class="col-md-6 mb-3 mb-md-0">
                        <div class="card py-4 h-100">
                            <div class="card-body text-center">
                                <i class="fa-solid fa-newspaper text-danger mb-2"></i>
                                <h4 class="text-uppercase m-0">ARTICULOS RELACIONADOS</h4>
                                <hr class="my-4 mx-auto" />
                                <a class="btn btn-danger" href="#about">Clic acá</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3 mb-md-0">
                        <div class="card py-4 h-100">
                            <div class="card-body text-center">
                                <i class="fa-solid fa-magnifying-glass text-danger mb-2"></i>
                                <h4 class="text-uppercase m-0">fUENTES CONSULTADAS</h4>
                                <hr class="my-4 mx-auto" />
                                <a class="btn btn-danger" href="#about">Clic acá</a>
                            </div>
                        </div>
                    </div>
                    
                </div>
                <div class="social d-flex justify-content-center">
                    <a class="mx-2" href="#!"><i class="fab fa-twitter"></i></a>
                    <a class="mx-2" href="#!"><i class="fab fa-facebook-f"></i></a>
                    <a class="mx-2" href="#!"><i class="fab fa-github"></i></a>
                </div>
            </div>
        </section>
        <!-- Footer-->
        <footer class="footer bg-personalized small text-center text-white-50"><div class="container px-4 px-lg-5">Copyright &copy; Your Website 2023</div></footer>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <!-- * *                               SB Forms JS                               * *-->
        <!-- * * Activate your form at https://startbootstrap.com/solution/contact-forms * *-->
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
    </body>
    <!-- 3Dmol.js CDN -->
    <script src="https://3Dmol.org/build/3Dmol-min.js"></script>
    <script>
    // Tabla interactiva de hibridación
    // Modal overlay para visualización 3D de cada átomo/grupo
    let overlayViewer = null;
    function showOverlayHibridacion(serial, infoHtml) {
        document.getElementById('overlay-hibridacion').style.display = 'flex';
        document.getElementById('overlay-hibridacion-info').innerHTML = infoHtml;
        // Limpiar visor anterior si existe
        if (overlayViewer) overlayViewer.clear();
        overlayViewer = $3Dmol.createViewer("overlay-hibridacion-viewer", {backgroundColor: "white"});
        // Mapeo de nombres a seriales reales
        let serials = serial;
        if (typeof serials === 'string') {
            serials = serials.replace(/\s/g, '');
            serials = serials.replace('N1', '4').replace('O1', '1').replace('O2', '2').replace('O3', '3');
            serials = serials.split(',').map(s => Number(s));
        }
        $3Dmol.download("assets/models/Conformer3D_COMPOUND_CID_4171.sdf", overlayViewer, {}, function() {
            overlayViewer.setStyle({}, {stick: {radius:0.18, color: '#bbb'}, sphere: {scale:0.23, color: '#bbb'}});
            overlayViewer.setStyle({serial: serials}, {stick: {radius:0.28, color: '#e74c3c'}, sphere: {scale:0.35, color: '#e74c3c'}});
            overlayViewer.zoomTo({serial: serials});
            overlayViewer.render();
        });
    }
    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('close-overlay-hibridacion').onclick = function() {
            document.getElementById('overlay-hibridacion').style.display = 'none';
            if (overlayViewer) overlayViewer.clear();
        };
    });
    document.addEventListener('DOMContentLoaded', function() {
        const filas = document.querySelectorAll('#tabla-hibridacion tbody tr');
        filas.forEach(fila => {
            fila.addEventListener('click', function() {
                const info = this.querySelectorAll('td');
                let detalle = `<b>Átomo(s):</b> ${info[0].innerText}<br>`;
                detalle += `<b>Fragmento/posición:</b> ${info[1].innerText}<br>`;
                detalle += `<b>Hibridación:</b> ${info[2].innerText}<br>`;
                detalle += `<b>Clase:</b> ${info[3].innerText}<br>`;
                detalle += `<b>Ángulo:</b> ${info[4].innerText}<br>`;
                detalle += `<b>Tipo de enlace:</b> ${info[5].innerText}<br>`;
                detalle += `<b>Geometría:</b> ${info[6].innerText}`;
                showOverlayHibridacion(this.dataset.serial, detalle);
            });
        });
    });
    // Visualizador 2D
    let viewer2d = $3Dmol.createViewer("viewer2d", {backgroundColor: "white"});
    $3Dmol.download("assets/models/Structure2D_COMPOUND_CID_4171.sdf", viewer2d, {}, function() {
        viewer2d.setStyle({}, {line: {color: 'black', linewidth: 2}});
        viewer2d.zoomTo();
        viewer2d.render();
    });
    // Visualizador 3D
    let viewer3d = $3Dmol.createViewer("viewer3d", {backgroundColor: "white"});
    $3Dmol.download("assets/models/Conformer3D_COMPOUND_CID_4171.sdf", viewer3d, {}, function() {
        viewer3d.setStyle({}, {stick: {radius:0.18}, sphere: {scale:0.23}});
        viewer3d.zoomTo();
        viewer3d.render();
    });
    </script>
    <!-- 3Dmol.js CDN -->
    <script src="https://3Dmol.org/build/3Dmol-min.js"></script>
    <script>
        // Función para resaltar átomos por índice (sin scroll ni focus)
        function highlightGroup(viewer, atomIndices, color) {
                viewer.setStyle({}, {stick: {radius:0.18, color: '#bbb'}, sphere: {scale:0.23, color: '#bbb'}});
                viewer.setStyle({serial: atomIndices}, {stick: {radius:0.25, color: color}, sphere: {scale:0.3, color: color}});
                viewer.zoomTo();
                viewer.render();
                // Evitar scroll automático
                setTimeout(()=>{
                    if(viewer && viewer.container) {
                        viewer.container.blur && viewer.container.blur();
                        document.activeElement && document.activeElement.blur && document.activeElement.blur();
                    }
                }, 100);
        }
    // 1. Anillo aromático (fenilo)
    // 1. Éter aromático (Ar–O–R)
    let v1 = $3Dmol.createViewer("viewer-funcional-1", {backgroundColor: "white"});
    $3Dmol.download("assets/models/Conformer3D_COMPOUND_CID_4171.sdf", v1, {}, function() {
        // Oxígeno puente (1) y carbonos adyacentes (11: anillo, 10: cadena)
        v1.setStyle({}, {stick: {radius:0.18, color: '#bbb'}, sphere: {scale:0.23, color: '#bbb'}});
        v1.setStyle({serial: [1, 11, 10]}, {stick: {radius:0.25, color: '#64a19d'}, sphere: {scale:0.3, color: '#64a19d'}});
        v1.zoomTo({serial: [1, 11, 10]});
        v1.render();
    });
    // 2. Alcohol secundario
    let v2 = $3Dmol.createViewer("viewer-funcional-2", {backgroundColor: "white"});
    $3Dmol.download("assets/models/Conformer3D_COMPOUND_CID_4171.sdf", v2, {}, function() {
        // Oxígeno (3), carbono 12 (alcohol)
        v2.setStyle({}, {stick: {radius:0.18, color: '#bbb'}, sphere: {scale:0.23, color: '#bbb'}});
        v2.setStyle({serial: [3, 12]}, {stick: {radius:0.25, color: '#e4c662'}, sphere: {scale:0.3, color: '#e4c662'}});
        v2.zoomTo({serial: [3, 12]});
        v2.render();
    });
    // 3. Amina secundaria
    let v3 = $3Dmol.createViewer("viewer-funcional-3", {backgroundColor: "white"});
    $3Dmol.download("assets/models/Conformer3D_COMPOUND_CID_4171.sdf", v3, {}, function() {
        // Nitrógeno (4), carbonos 5 y 6 (isopropilo), hidrógeno del NH (24)
        v3.setStyle({}, {stick: {radius:0.18, color: '#bbb'}, sphere: {scale:0.23, color: '#bbb'}});
        v3.setStyle({serial: [4, 5, 6, 24]}, {stick: {radius:0.25, color: '#1cabc4'}, sphere: {scale:0.3, color: '#1cabc4'}});
        v3.zoomTo({serial: [4, 5, 6, 24]});
        v3.render();
    });
    // 4. Anillo aromático (bencénico)
    let v4 = $3Dmol.createViewer("viewer-funcional-4", {backgroundColor: "white"});
    $3Dmol.download("assets/models/Conformer3D_COMPOUND_CID_4171.sdf", v4, {}, function() {
        // Átomos del anillo bencénico: 14, 15, 16, 17, 11, 13
        v4.setStyle({}, {stick: {radius:0.18, color: '#bbb'}, sphere: {scale:0.23, color: '#bbb'}});
        v4.setStyle({serial: [14, 15, 16, 17, 11, 13]}, {stick: {radius:0.25, color: '#a16468'}, sphere: {scale:0.3, color: '#a16468'}});
        v4.zoomTo({serial: [14, 15, 16, 17, 11, 13]});
        v4.render();
    });
    </script>
</html>
